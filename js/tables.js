var buildData = [{
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    }, {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    }, {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    }, {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    }, {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },
    {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    }, {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    }, {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    }, {
        "buildLable": "lableName",
        "startedBy": "TesterName",
        "buildComment": "commants",
        "buildSize": 30,
        "startesAt": "Date",
        "viewSourceLink": "Link",
    },

]

var testRunData = [{
        "testerName": "Tester1",
        "domain": "projects.localzoho.com",
        "machine": "Windows",
        "no_of_browser	": 4,
        "buildName": "Demo",
        "Priority": "Low",
        "testper": "10%",
    }, {
        "testerName": "Tester1",
        "domain": "projects.localzoho.com",
        "machine": "Windows",
        "no_of_browser	": 4,
        "buildName": "Demo",
        "Priority": "Low",
        "testper": "10%",
    }, {
        "testerName": "Tester1",
        "domain": "projects.localzoho.com",
        "machine": "Windows",
        "no_of_browser	": 4,
        "buildName": "Demo",
        "Priority": "Low",
        "testper": "10%",
    }, {
        "testerName": "Tester1",
        "domain": "projects.localzoho.com",
        "machine": "Windows",
        "no_of_browser	": 4,
        "buildName": "Demo",
        "Priority": "Low",
        "testper": "10%",
    }
]

var mchineData = [{
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    }, {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    }, {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    }, {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    }, {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
    {
        "ipAddress": "192.192.192.0",
        "platform": "Linux",
        "activeUser": "UserName",
    },
]

let date = new Date();
let formatted_date = date.getFullYear() + "-" + (date.getMonth() + 1) + "-" + date.getDate()

var bugData = [{
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    }, {
        "bugTitle": "Sample Tittle For Bug",
        "bugreporter": "Reportername",
        "addDate": formatted_date,
        "srcAuto": "API",
        "description": "Description Area",
        "bugstatus": "OPEN",
        "assineeName": "Name1",
    },


];

let bugDetailId;
var apidata =[];

window.onload = () => {

    loadBuildData(buildData);

    loadTestRunData(testRunData);

    loadMachineData(mchineData);

    loadBugData(bugData);


}



function loadBuildData(data) {

    const tableBody = document.getElementById('tableData');
    let tableHtml = '';
    for (let index = 0; index < data.length; index++) {
        let obj = data[index];
        tableHtml += '<tr style="cursor: pointer;"><td>' + (index + 1) + '</td><td>' + obj.buildLable + '</td><td>' + obj.startedBy + '</td><td>' + obj.buildComment + '</td><td>' + obj.buildSize + '</td><td>' + obj.startesAt + '</td><td>' + obj.viewSourceLink + '</td></tr>';
    }

    tableBody.innerHTML = tableHtml;
}

function loadTestRunData(data) {

    const tableBody = document.getElementById('runTableData');
    let tableHtml = '';
    for (let index = 0; index < data.length; index++) {
        let obj = data[index];
        tableHtml += '<tr style="cursor: pointer;"><td style = "min-width: 35px;">' + (index + 1) + '</td><td>' + obj.testerName + '</td><td style = "min-width: 180px;">' + obj.domain + '</td><td>' + obj.machine + '</td><td>' + obj.no_of_browser + '</td><td>' + obj.buildName + '</td><td>' + obj.Priority + '</td><td>' + obj.testper + '</td></tr>';
    }
    tableBody.innerHTML = tableHtml;
}

function loadMachineData(data) {

    const tableBody = document.getElementById('machineTableData');
    let tableHtml = '';
    for (let index = 0; index < data.length; index++) {
        let obj = data[index];
        tableHtml +=
            '<tr style="cursor: pointer;"><td>' + (index + 1) + '</td><td>' + obj.ipAddress + '</td><td>' + obj.platform + '</td><td>' + obj.activeUser + '</td><td><button type="button" class="btn btn-outline-secondary btn-sm">connect</button></td></tr>';
    }
    tableBody.innerHTML = tableHtml;
}

function loadBugData(data) {

    const tableBody = document.getElementById('bugTableData');
    let tableHtml = '';
    for (let index = 0; index < data.length; index++) {
        let obj = data[index];
        tableHtml += '<tr id="bug-list-' + (index + 1) + '" onclick="getId(this)" style="cursor: pointer;"><td style="min-width: 25px;"><input class=" bulk-select form-check-input" type="checkbox" value="" id="flexCheckDefault"></td><td style="min-width: 30px;">' + (index + 1) + '</td><td style="min-width:350px;" onclick="openPage()">' + obj.bugTitle + '</td><td style="min-width: 50px;">' + obj.bugreporter + '</td><td style="min-width: 50px;">' + obj.addDate + '</td><td style="min-width: 95px;">' + obj.srcAuto + '</td><td style="min-width: 90px;">' + obj.bugstatus + '</td><td style="min-width: 70px;">' + obj.assineeName + '</td></tr>';

    }
    tableBody.innerHTML = tableHtml;

}


function openPage() {

    if (bugDetailId) {
        console.log(id);
        $('.bugdetailPage').show();
        $(".viewBody").addClass("freeze-Back");
    }
}

function getId(element) {

    id = $(element).attr('id');

    bugDetailId = id;

    const bug_page_title = document.getElementById(bugDetailId);
    const cells = bug_page_title.getElementsByTagName("td");
    const bug_title = document.getElementById('bug-title-name');
    const bug_reporter = document.getElementById('rep-name');
    const bug_detail_area = document.getElementById('bug-detail-area');
    const bug_det_asi = document.getElementById('detail-assine');
    const bug_det_soa = document.getElementById('detail-SOA');
    const bug_det_status = document.getElementById('deatail-status');

    bug_title.innerHTML = cells[2].innerText;
    bug_reporter.innerHTML = cells[3].innerText;
    bug_detail_area.innerHTML = cells[2].innerText + ' Details';
    bug_det_asi.innerHTML = cells[7].innerText;
    bug_det_soa.innerHTML = cells[5].innerText;
    bug_det_status.innerHTML = cells[6].innerText;

}

function isertBugRow(bugTableValue)
{
    console.log(bugTableValue);
    var x=document.getElementById('bugTableData');
    var new_row = x.rows[1].cloneNode(true);
    var len = x.rows.length + 1;
    new_row.cells[0].innerHTML ='<input class=" bulk-select form-check-input" type="checkbox" value="" id="flexCheckDefault">';
    new_row.cells[1].innerText = len;
    new_row.cells[2].innerText = bugTableValue.bugName;
    new_row.cells[3].innerText = bugTableValue.reporterName;
    new_row.cells[4].innerText = '';
    new_row.cells[5].innerText = bugTableValue.autoSource;
    new_row.cells[6].innerText = bugTableValue.bugAssinee;

    x.appendChild(new_row);
}

function insertRunRow(runTableValue)
{
    console.log(runTableValue);
    var x=document.getElementById('runTableData');
    var new_row = x.rows[1].cloneNode(true);
    var len = x.rows.length + 1;
    // new_row.cells[0].innerHTML ='<input class=" bulk-select form-check-input" type="checkbox" value="" id="flexCheckDefault">';
    new_row.cells[0].innerText = len;
    new_row.cells[1].innerText = runTableValue.testerName;
    new_row.cells[2].innerText = runTableValue.serverName;
    new_row.cells[3].innerText = runTableValue.machine;
    new_row.cells[4].innerText = runTableValue.noBrowsers;
    new_row.cells[5].innerText = runTableValue.buildName;
    new_row.cells[6].innerText = runTableValue.priority;
    
    x.appendChild(new_row);
}


$(document).ready(function() {

    var packeName = [];
    var className = [];
    var caseCount = [];
    var caseName = [];
    getValue(); 

    $('#runtestId').click(function(){
        className = [];
        getValue();  
        splitClassName();
        getClassName(packeName);
        //console.log(packeName);
        //console.log(caseName); 
        console.log(className , caseCount ,caseName);
    });
    
    function getValue(){
        
        $.ajax({ 
            url: '',
            data: "",
            dataType: "json",
            success: function(data){
            var obj = data;  
            apidata = obj;
            console.log(apidata);
            }  
        }); 
    }

    function splitClassName(){
        packeName = [];
        caseCount = [];
        caseName = [];
        for (const key in apidata) { 
            var report = apidata[key];
            //console.log(report);
           getJreport(report);
        }
    }

    function getJreport(jreport){
        let classRep = jreport.jsonReport;
        var classRep1 = classRep.jsonReportObj;
        for (const key in classRep1) {
            let i=0;
            let temp='';
            var caseNameObj = {};
            packeName.push(key);
            let name =classRep1[key];
                for (const key in name ) {
                    i++; 
                    temp +='"'+key+'";';
                }
            caseNameObj ["CaseName"] = temp;
            caseName.push(caseNameObj);
            caseCount.push(i);
        }
        //console.log(packeName[0]);
      // console.log(classRep1);
    }

    function getClassName(array){

       // console.log(packeName);
        for (let i = 0; i < array.length; i++) {
            let temp = array[i].split("ApiCode.")
            className.push(temp[1]);
        }
    }

});
